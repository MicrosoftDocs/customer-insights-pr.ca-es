---
title: Experiments amb Machine Learning Studio (clàssic)
description: Utilitzeu models basats en el Machine Learning Studio (clàssic) al Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: ca-ES
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598327"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="5ce49-103">Utilitzar models basats en el Machine Learning Studio (clàssic) de l'Azure</span><span class="sxs-lookup"><span data-stu-id="5ce49-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="5ce49-104">Les dades unificades del Dynamics 365 Customer Insights constitueixen un origen per a la creació de models d'aprenentatge automàtic que puguin generar informació addicional de negoci.</span><span class="sxs-lookup"><span data-stu-id="5ce49-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="5ce49-105">El Customer Insights s'integra amb el Machine Learning Studio (clàssic) per utilitzar els vostres propis models personalitzats.</span><span class="sxs-lookup"><span data-stu-id="5ce49-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="5ce49-106">Per veure com els models desenvolupats a l'aprenentatge automàtic de l'Azure s'integren amb el Customer Insights, vegeu els [experiments amb l'aprenentatge automàtic de l'Azure](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="5ce49-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5ce49-107">Requisits previs</span><span class="sxs-lookup"><span data-stu-id="5ce49-107">Prerequisites</span></span>

- <span data-ttu-id="5ce49-108">Accés al Customer Insights</span><span class="sxs-lookup"><span data-stu-id="5ce49-108">Access to Customer Insights</span></span>
- <span data-ttu-id="5ce49-109">Subscripció a l'Azure Enterprise activa</span><span class="sxs-lookup"><span data-stu-id="5ce49-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="5ce49-110">Perfils de client unificats</span><span class="sxs-lookup"><span data-stu-id="5ce49-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="5ce49-111">[Exportació d'entitats a l'Azure Blob Storage](export-azure-blob-storage.md) configurada</span><span class="sxs-lookup"><span data-stu-id="5ce49-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="5ce49-112">Configurar el Machine Learning Studio (clàssic)</span><span class="sxs-lookup"><span data-stu-id="5ce49-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="5ce49-113">En un primer pas, necessitem crear una àrea de treball i obrir el Machine Learning Studio (clàssic).</span><span class="sxs-lookup"><span data-stu-id="5ce49-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="5ce49-114">Aneu a[https://www.portal.azure.com](https://www.portal.azure.com/) i inicieu la sessió.</span><span class="sxs-lookup"><span data-stu-id="5ce49-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="5ce49-115">Seleccioneu **Crea un recurs**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="5ce49-116">Cerqueu **Àrea de treball del Machine Learning Studio** i seleccioneu **Crea**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="5ce49-117">Introduïu els detalls necessaris per [crear l'àrea de treball](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="5ce49-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="5ce49-118">Trieu el **nivell de preus del pla del servei web** segons la quantitat de dades que vulgueu importar.</span><span class="sxs-lookup"><span data-stu-id="5ce49-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="5ce49-119">Per obtenir un millor rendiment, seleccioneu la **Ubicació** que us sigui geogràficament més propera.</span><span class="sxs-lookup"><span data-stu-id="5ce49-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="5ce49-120">Després de crear el recurs, es mostrarà l'escriptori digital de l'àrea de treball del Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="5ce49-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="5ce49-121">Seleccioneu **Inicia el Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interfície de l'usuari de l'Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="5ce49-123">Treballar amb l'Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="5ce49-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="5ce49-124">Ara podeu crear un experiment nou o importar una plantilla d'experiments existent des de la galeria d'exemple.</span><span class="sxs-lookup"><span data-stu-id="5ce49-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="5ce49-125">Hi ha experiments d'exemple corresponents a tres escenaris estàndard:</span><span class="sxs-lookup"><span data-stu-id="5ce49-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="5ce49-126">Predicció de rotació</span><span class="sxs-lookup"><span data-stu-id="5ce49-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="5ce49-127">Valor del cicle de vida del client</span><span class="sxs-lookup"><span data-stu-id="5ce49-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="5ce49-128">Recomanació de productes o següent acció recomanada</span><span class="sxs-lookup"><span data-stu-id="5ce49-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="5ce49-129">Si creeu un experiment nou o utilitzeu una plantilla d'experiments de la galeria, heu de configurar les propietats de les **Dades d'importació**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="5ce49-130">Utilitzeu l'experiència guiada o proporcioneu directament els detalls per accedir a l'emmagatzematge blob de l'Azure que conté les dades.</span><span class="sxs-lookup"><span data-stu-id="5ce49-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Experiment de l'Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="5ce49-132">Ara podeu crear un pipeline de processament personalitzat per netejar i preprocessar les dades, extreure'n característiques i entrenar un model adient.</span><span class="sxs-lookup"><span data-stu-id="5ce49-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="5ce49-133">Proveu i optimitzeu el rendiment del model.</span><span class="sxs-lookup"><span data-stu-id="5ce49-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="5ce49-134">Quan us satisfaci la qualitat d'un model, seleccioneu **Configura el servei web** > **Servei web predictiu**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="5ce49-135">Aquesta opció importa el model entrenat i el pipeline de caracterització de l'experiment d'entrenament a un servei predictiu.</span><span class="sxs-lookup"><span data-stu-id="5ce49-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="5ce49-136">El servei predictiu pot utilitzar un altre conjunt de dades d'entrada amb l'esquema utilitzat a l'experiment d'entrenament per fer prediccions.</span><span class="sxs-lookup"><span data-stu-id="5ce49-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Configurar un servei web predictiu](media/predictive-webservice-control.png)

1. <span data-ttu-id="5ce49-138">Quan l'experiment del servei web predictiu tingueu èxit, podreu implementar-lo per a la planificació automàtica.</span><span class="sxs-lookup"><span data-stu-id="5ce49-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="5ce49-139">Per fer que el servei web funcioni amb el Customer Insights, seleccioneu **Implementa el servei web** > **Implementa el servei web [Nou] Versió preliminar**.</span><span class="sxs-lookup"><span data-stu-id="5ce49-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="5ce49-140">[Més informació sobre implementar un servei web](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="5ce49-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Implementar un servei web predictiu](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="5ce49-142">Models d'exemple de la galeria</span><span class="sxs-lookup"><span data-stu-id="5ce49-142">Sample models from the gallery</span></span>

<span data-ttu-id="5ce49-143">Farem servir un escenari fictici de l'Hotel Contoso per als models d'aquest article.</span><span class="sxs-lookup"><span data-stu-id="5ce49-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="5ce49-144">L'Hotel Contoso recull les dades següents:</span><span class="sxs-lookup"><span data-stu-id="5ce49-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="5ce49-145">Dades del CRM que consisteixen en l'activitat d'estades de l'hotel.</span><span class="sxs-lookup"><span data-stu-id="5ce49-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="5ce49-146">El conjunt de dades inclou informació sobre les dates d'estada de cada client registrat.</span><span class="sxs-lookup"><span data-stu-id="5ce49-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="5ce49-147">També conté informació sobre la reserva, els tipus d'habitacions, els detalls de les despeses, etc.</span><span class="sxs-lookup"><span data-stu-id="5ce49-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="5ce49-148">Les dades abasten quatre anys, de gener del 2014 a gener del 2018.</span><span class="sxs-lookup"><span data-stu-id="5ce49-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="5ce49-149">Perfils de client dels hostes de l'hotel.</span><span class="sxs-lookup"><span data-stu-id="5ce49-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="5ce49-150">Aquests perfils contenen informació sobre cada client, com ara el nom, la data de naixement, l'adreça postal, el sexe i el número de telèfon.</span><span class="sxs-lookup"><span data-stu-id="5ce49-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="5ce49-151">Ús dels serveis oferts per l'hotel, com ara spa, servei de bugaderia, Wi-Fi o missatgeria.</span><span class="sxs-lookup"><span data-stu-id="5ce49-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="5ce49-152">Aquesta informació es registra per a cada client registrat.</span><span class="sxs-lookup"><span data-stu-id="5ce49-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="5ce49-153">Normalment, l'ús dels serveis està enllaçat amb l'estada.</span><span class="sxs-lookup"><span data-stu-id="5ce49-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="5ce49-154">En alguns casos, els clients poden utilitzar els serveis sense estar-se a l'hotel.</span><span class="sxs-lookup"><span data-stu-id="5ce49-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="5ce49-155">Anàlisi de rotació</span><span class="sxs-lookup"><span data-stu-id="5ce49-155">Churn Analysis</span></span>

<span data-ttu-id="5ce49-156">L'anàlisi de rotació s'aplica a diferents àrees de negoci.</span><span class="sxs-lookup"><span data-stu-id="5ce49-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="5ce49-157">En aquest exemple, veurem el servei de rotació, concretament en el context dels serveis de l'hotel com es descriu més amunt.</span><span class="sxs-lookup"><span data-stu-id="5ce49-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="5ce49-158">Proporciona un exemple d'un pipeline de model d'extrem a extrem que es pot utilitzar com a punt de partida per a qualsevol altre tipus de model de rotació.</span><span class="sxs-lookup"><span data-stu-id="5ce49-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="5ce49-159">Definició de rotació</span><span class="sxs-lookup"><span data-stu-id="5ce49-159">Definition of Churn</span></span>

<span data-ttu-id="5ce49-160">La definició de rotació pot ser diferent en funció de l'escenari.</span><span class="sxs-lookup"><span data-stu-id="5ce49-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="5ce49-161">En aquest exemple, un hoste que no ha visitat l'hotel durant l'últim any s'hauria d'etiquetar com a Rotació.</span><span class="sxs-lookup"><span data-stu-id="5ce49-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="5ce49-162">La plantilla de l'experiment es pot importar des de la galeria.</span><span class="sxs-lookup"><span data-stu-id="5ce49-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="5ce49-163">En primer lloc, assegureu-vos que importeu les dades corresponents a **Activitat d'estades de l'hotel**, **Dades dels clients** i **Dades d'ús del servei** des de l'emmagatzematge blob de l'Azure.</span><span class="sxs-lookup"><span data-stu-id="5ce49-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importar dades per al model de rotació](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="5ce49-165">Caracterització</span><span class="sxs-lookup"><span data-stu-id="5ce49-165">Featurization</span></span>

<span data-ttu-id="5ce49-166">En funció de la definició de rotació, primer identifiquem les característiques sense processar que influiran en l'etiqueta.</span><span class="sxs-lookup"><span data-stu-id="5ce49-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="5ce49-167">A continuació, processem aquestes característiques i les convertim en característiques numèriques que es poden utilitzar amb models d'aprenentatge automàtic.</span><span class="sxs-lookup"><span data-stu-id="5ce49-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="5ce49-168">Les dades s'integren al Customer Insights per tal que puguem unir aquestes taules mitjançant l'*ID de client*.</span><span class="sxs-lookup"><span data-stu-id="5ce49-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Unir dades importades](media/join-imported-data.png)

<span data-ttu-id="5ce49-170">La caracterització per a la creació del model per a l'anàlisi de rotació pot ser una mica complicada.</span><span class="sxs-lookup"><span data-stu-id="5ce49-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="5ce49-171">Les dades són una funció de temps amb l'activitat de l'hotel nova registrada diàriament.</span><span class="sxs-lookup"><span data-stu-id="5ce49-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="5ce49-172">Durant la caracterització, volem generar característiques estàtiques a partir de dades dinàmiques.</span><span class="sxs-lookup"><span data-stu-id="5ce49-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="5ce49-173">En aquest cas, generem diverses característiques de l'activitat de l'hotel amb una finestra lliscant d'un any.</span><span class="sxs-lookup"><span data-stu-id="5ce49-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="5ce49-174">També ampliem les característiques de categories, com ara el tipus d'habitació o el tipus de reserva, i les convertim en característiques separades mitjançant la codificació one-hot.</span><span class="sxs-lookup"><span data-stu-id="5ce49-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="5ce49-175">Llista final de característiques:</span><span class="sxs-lookup"><span data-stu-id="5ce49-175">Final list of features:</span></span>

| <span data-ttu-id="5ce49-176">**Número**</span><span class="sxs-lookup"><span data-stu-id="5ce49-176">**Number**</span></span>  | <span data-ttu-id="5ce49-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="5ce49-177">**Original_Column**</span></span>          | <span data-ttu-id="5ce49-178">**Característiques derivades**</span><span class="sxs-lookup"><span data-stu-id="5ce49-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="5ce49-179">1</span><span class="sxs-lookup"><span data-stu-id="5ce49-179">1</span></span>           | <span data-ttu-id="5ce49-180">Tipus d'habitació</span><span class="sxs-lookup"><span data-stu-id="5ce49-180">Room Type</span></span>                    | <span data-ttu-id="5ce49-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="5ce49-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="5ce49-182">2</span><span class="sxs-lookup"><span data-stu-id="5ce49-182">2</span></span>           | <span data-ttu-id="5ce49-183">Tipus de reserva</span><span class="sxs-lookup"><span data-stu-id="5ce49-183">Booking Type</span></span>                 | <span data-ttu-id="5ce49-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="5ce49-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="5ce49-185">3</span><span class="sxs-lookup"><span data-stu-id="5ce49-185">3</span></span>           | <span data-ttu-id="5ce49-186">Categoria de viatge</span><span class="sxs-lookup"><span data-stu-id="5ce49-186">Travel Category</span></span>              | <span data-ttu-id="5ce49-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="5ce49-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="5ce49-188">4</span><span class="sxs-lookup"><span data-stu-id="5ce49-188">4</span></span>           | <span data-ttu-id="5ce49-189">Dòlars gastats</span><span class="sxs-lookup"><span data-stu-id="5ce49-189">Dollars Spent</span></span>                | <span data-ttu-id="5ce49-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="5ce49-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="5ce49-191">5</span><span class="sxs-lookup"><span data-stu-id="5ce49-191">5</span></span>           | <span data-ttu-id="5ce49-192">Dates d'entrada i sortida</span><span class="sxs-lookup"><span data-stu-id="5ce49-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="5ce49-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="5ce49-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="5ce49-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="5ce49-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="5ce49-195">6</span><span class="sxs-lookup"><span data-stu-id="5ce49-195">6</span></span>           | <span data-ttu-id="5ce49-196">Ús de serveis</span><span class="sxs-lookup"><span data-stu-id="5ce49-196">Service Usage</span></span>                | <span data-ttu-id="5ce49-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="5ce49-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="5ce49-198">Selecció del model</span><span class="sxs-lookup"><span data-stu-id="5ce49-198">Model selection</span></span>

<span data-ttu-id="5ce49-199">Ara hem de triar l'algoritme òptim que voleu utilitzar.</span><span class="sxs-lookup"><span data-stu-id="5ce49-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="5ce49-200">En aquest cas, la majoria de les característiques es basen en característiques de categoria.</span><span class="sxs-lookup"><span data-stu-id="5ce49-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="5ce49-201">Normalment, els models basats en arbres de decisions funcionen bé.</span><span class="sxs-lookup"><span data-stu-id="5ce49-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="5ce49-202">Si només hi ha característiques numèriques, les xarxes neuronals serien una millor opció.</span><span class="sxs-lookup"><span data-stu-id="5ce49-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="5ce49-203">Una màquina vectorial de suport (SVM) també és un bon candidat en aquestes situacions; tanmateix, necessita més ajustaments per obtenir-ne el millor rendiment.</span><span class="sxs-lookup"><span data-stu-id="5ce49-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="5ce49-204">Escollim **Arbre de decisions potenciat per dues classes** com a primer model d'elecció seguit per **SVM de dues classes** com a segon model.</span><span class="sxs-lookup"><span data-stu-id="5ce49-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="5ce49-205">L'Azure Machine Learning Studio us permet fer proves A/B, per la qual cosa és beneficiós començar amb dos models en comptes d'un.</span><span class="sxs-lookup"><span data-stu-id="5ce49-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="5ce49-206">A la imatge següent es mostra el pipeline d'entrenament i avaluació del model de l'Azure Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="5ce49-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Model de rotació de l'Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="5ce49-208">També apliquem una tècnica anomenada **Importància de característica de permutació**, un aspecte important de l'optimització de models.</span><span class="sxs-lookup"><span data-stu-id="5ce49-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="5ce49-209">Els models integrats no tenen pràcticament cap impacte en qualsevol característica específica de la predicció final.</span><span class="sxs-lookup"><span data-stu-id="5ce49-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="5ce49-210">La calculadora d'importància de característica utilitza un algoritme personalitzat per calcular la influència de les característiques individuals en el resultat d'un model específic.</span><span class="sxs-lookup"><span data-stu-id="5ce49-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="5ce49-211">La importància de característica es normalitza entre +1 i -1.</span><span class="sxs-lookup"><span data-stu-id="5ce49-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="5ce49-212">Una influència negativa significa que la característica corresponent té una influència poc intuïtiva en el resultat i s'hauria de suprimir del model.</span><span class="sxs-lookup"><span data-stu-id="5ce49-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="5ce49-213">Una influència positiva indica que la característica contribueix en gran mesura a la predicció.</span><span class="sxs-lookup"><span data-stu-id="5ce49-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="5ce49-214">Aquests valors no són coeficients de correlació perquè són mètriques diferents.</span><span class="sxs-lookup"><span data-stu-id="5ce49-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="5ce49-215">Per obtenir més informació, vegeu [Importància de característica de permutació](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="5ce49-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="5ce49-216">Trobareu [l'experiment de rotació sencer a la Galeria d'IA de l'Azure](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="5ce49-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="5ce49-217">Predicció del valor del cicle de vida del client</span><span class="sxs-lookup"><span data-stu-id="5ce49-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="5ce49-218">El càlcul del valor del cicle de vida del client (CLTV) és una de les mètriques clau que una empresa pot utilitzar per avaluar i segmentar els seus clients.</span><span class="sxs-lookup"><span data-stu-id="5ce49-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="5ce49-219">Per al negoci hoteler, és fonamental conèixer els clients.</span><span class="sxs-lookup"><span data-stu-id="5ce49-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="5ce49-220">Per exemple, entendre els factors que defineixen els bons clients és informació crucial.</span><span class="sxs-lookup"><span data-stu-id="5ce49-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="5ce49-221">Ajuda l'administració de l'hotel a avaluar les característiques en què necessita centrar-se i que necessita millorar per satisfer els clients d'alt potencial econòmic.</span><span class="sxs-lookup"><span data-stu-id="5ce49-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="5ce49-222">Aquestes decisions poden tenir un impacte directe en les vendes i els guanys.</span><span class="sxs-lookup"><span data-stu-id="5ce49-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="5ce49-223">Definició del CLTV</span><span class="sxs-lookup"><span data-stu-id="5ce49-223">Definition of CLTV</span></span>

<span data-ttu-id="5ce49-224">En aquest exemple, definim el CLTV d'un client com l'import total en dòlars que s'espera que el client gasti en els pròxims 365 dies.</span><span class="sxs-lookup"><span data-stu-id="5ce49-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="5ce49-225">Utilitzarem els últims tres anys de dades de tots els clients per predir aquest valor.</span><span class="sxs-lookup"><span data-stu-id="5ce49-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="5ce49-226">Caracterització</span><span class="sxs-lookup"><span data-stu-id="5ce49-226">Featurization</span></span>

<span data-ttu-id="5ce49-227">En aquest cas, la caracterització serà bastant semblant a l'escenari de rotació.</span><span class="sxs-lookup"><span data-stu-id="5ce49-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="5ce49-228">No obstant això, les etiquetes i els valors previstos són diferents dels que s'han definit anteriorment.</span><span class="sxs-lookup"><span data-stu-id="5ce49-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="5ce49-229">Selecció del model</span><span class="sxs-lookup"><span data-stu-id="5ce49-229">Model selection</span></span>

<span data-ttu-id="5ce49-230">Predir el CLTV és un problema de regressió, ja que el valor de predicció és una variable contínua que es valora positivament.</span><span class="sxs-lookup"><span data-stu-id="5ce49-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="5ce49-231">En funció de les propietats de les característiques, seleccionem **Regressió d'arbre de decisions potenciat** com a algoritme i **Regressió de xarxa neuronal** com a algoritme addicional per l'aprenentatge del model.</span><span class="sxs-lookup"><span data-stu-id="5ce49-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="5ce49-232">Recomanació de productes o següent acció recomanada</span><span class="sxs-lookup"><span data-stu-id="5ce49-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="5ce49-233">La recomanació de producte en un escenari de l'hotel s'interpreta com a serveis de recomanació oferts per l'hotel als clients.</span><span class="sxs-lookup"><span data-stu-id="5ce49-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="5ce49-234">L'objectiu és triar els serveis adients per als clients per tal de maximitzar-ne l'ús.</span><span class="sxs-lookup"><span data-stu-id="5ce49-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="5ce49-235">És similar a les recomanacions de pel·lícules per a usuaris de servei de transmissió de vídeos.</span><span class="sxs-lookup"><span data-stu-id="5ce49-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="5ce49-236">Definició de recomanació de productes o següent acció recomanada</span><span class="sxs-lookup"><span data-stu-id="5ce49-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="5ce49-237">Definim l'objectiu com a maximitzar la quantitat de dòlars de l'ús del servei oferint els millors serveis als clients de l'hotel segons el seu interès.</span><span class="sxs-lookup"><span data-stu-id="5ce49-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="5ce49-238">Caracterització</span><span class="sxs-lookup"><span data-stu-id="5ce49-238">Featurization</span></span>

<span data-ttu-id="5ce49-239">Igual que el model de rotació, unim el valor de ServiceCustomerID de l'hotel amb el de CustomerID per crear recomanacions coherents per al valor de CustomerID.</span><span class="sxs-lookup"><span data-stu-id="5ce49-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Caracterització del model de recomanacions](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="5ce49-241">Les dades provenen de tres entitats diferents i característiques que se'n deriven.</span><span class="sxs-lookup"><span data-stu-id="5ce49-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="5ce49-242">La caracterització del problema de recomanació és diferent en comparació amb els escenaris de rotació o del CLTV.</span><span class="sxs-lookup"><span data-stu-id="5ce49-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="5ce49-243">El model de recomanació necessita introduir dades en tres conjunts de característiques.</span><span class="sxs-lookup"><span data-stu-id="5ce49-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="5ce49-244">Selecció del model</span><span class="sxs-lookup"><span data-stu-id="5ce49-244">Model selection</span></span>

<span data-ttu-id="5ce49-245">Preveiem els productes o serveis mitjançant l'algoritme anomenat **Entrena el recomanador de Matchbox** per entrenar el model de recomanació.</span><span class="sxs-lookup"><span data-stu-id="5ce49-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algoritme de recomanació de productes](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="5ce49-247">Els tres ports d'entrada per al model **Entrena el recomanador de Matchbox** utilitzen les dades d'ús del servei d'aprenentatge, la descripció del client (opcional) i la descripció del servei.</span><span class="sxs-lookup"><span data-stu-id="5ce49-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="5ce49-248">Hi ha tres maneres diferents de puntuar el model.</span><span class="sxs-lookup"><span data-stu-id="5ce49-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="5ce49-249">Una és per a l'avaluació de models en què es calcula una puntuació de guanys acumulats descomptats normalitzats (NDCG) per classificar els elements que s'han valorat.</span><span class="sxs-lookup"><span data-stu-id="5ce49-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="5ce49-250">En aquest experiment, la puntuació de l'NDCG és 0,97.</span><span class="sxs-lookup"><span data-stu-id="5ce49-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="5ce49-251">Les altres dues opcions puntuen el model en relació amb tot el catàleg de serveis recomanables o només els elements que els usuaris no han utilitzat abans.</span><span class="sxs-lookup"><span data-stu-id="5ce49-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="5ce49-252">Si ens fixem més en les distribucions de les recomanacions de tot el catàleg de serveis, veurem que els principals serveis que s'han de recomanar són el telèfon, el Wi-Fi i la missatgeria.</span><span class="sxs-lookup"><span data-stu-id="5ce49-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="5ce49-253">Això és coherent amb el que hem trobat a les distribucions de les dades de consum del servei:</span><span class="sxs-lookup"><span data-stu-id="5ce49-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Resultat del model de recomanació](media/azure-machine-learning-model-output.png)

<span data-ttu-id="5ce49-255">Podeu accedir a [tot l'experiment de recomanació de productes a la Galeria d'IA de l'Azure.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="5ce49-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="5ce49-256">Integrar models personalitzats</span><span class="sxs-lookup"><span data-stu-id="5ce49-256">Integrate custom models</span></span>

<span data-ttu-id="5ce49-257">Per utilitzar aquestes prediccions al Customer Insights, heu d'**exportar** les prediccions juntament amb els ID de client.</span><span class="sxs-lookup"><span data-stu-id="5ce49-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="5ce49-258">[Exporteu-los a la mateixa ubicació d'emmagatzematge de blob de l'Azure](/azure/storage/common/storage-import-export-data-from-blobs) que la ubicació a la qual exporteu les dades d'origen.</span><span class="sxs-lookup"><span data-stu-id="5ce49-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="5ce49-259">El servei web predictiu es pot planificar per executar-se periòdicament i actualitzar les puntuacions.</span><span class="sxs-lookup"><span data-stu-id="5ce49-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="5ce49-260">Les dades generades pel model personalitzat es poden utilitzar per continuar enriquint les dades dels clients.</span><span class="sxs-lookup"><span data-stu-id="5ce49-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="5ce49-261">Per obtenir més informació, vegeu [Models d'aprenentatge automàtic personalitzats](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="5ce49-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]